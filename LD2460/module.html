<style>
    canvas {
      border: 1px solid #000;
    }
</style>

<canvas id="myCanvas" width="700" height="600"></canvas>

<script>
    /* Hier werden die Daten vom Modul verarbeitet. In unserem Falle verschicken wir ein Objekt mit Informationen, wie bestimmte Elemente angepasst werden sollen
       Prinzipiell kann das Nachrichtenformat aber beliebig angepasst werden und kann an den Bedarf des Moduls angepasst werden */
    function handleMessage(data) {
        const decodedData = JSON.parse(data);
        for (const parameter in decodedData) {
            // Die Anpassungen betreffen immer das Element mit der ID des Parameters, daher fragen wir das Element erst einmal ab
            const element = document.getElementById(parameter);
            // Abhängig vom Parameter werden allerdings verschiedene Werte angepasst
            switch (parameter) {
                // Beim äußeren Container kann die Farbe angepasst werden. Daher ist der Wert die RGB-Farbe, welche wir im Container als Stil setzen
                case 'container': {
                    // Zahl in Hex-String überführen
                    let value = decodedData[parameter].toString(16);
                    // Auf 6 Zeichen auffüllen, damit es eine gültige Farbdarstellung wird
                    value = value.padStart(6, '0');
                    element.style.backgroundColor = '#' + value;
                    break;
                }

                // Bei den Divs für die einzelnen Zähler wird die Sichtbarkeit gesetzt (true = sichtbar, false = nicht sichtbar)
                case 'counter1':
                case 'counter2':
                case 'counter3':
                    element.className = decodedData[parameter] ? '' : 'hidden';
                    break;

                case 'image':
                    // Auch das Bild wird versteckt, falls es keine Bilddaten gibt
                    element.className = decodedData[parameter] ? '' : 'hidden';
                    element.src = decodedData[parameter];
                    break;

                default:
                    element.innerText = decodedData[parameter];
                    break;
            }
        }
    }
  
    const canvas = document.getElementById('myCanvas');   
    const ctx    = canvas.getContext('2d');

    // Beispiel: Kreis-Mittelpunkt und Radius
    const cx = 300;      // X-Koordinate des Kreismittelpunkts
    const cy = 250;      // Y-Koordinate des Kreismittelpunkts
    const r  = 200;       // Radius
    const r1  = 100;       // Radius

    // Kreis zeichnen 
    ctx.beginPath();
    ctx.arc(cx, cy, r, 0, 2 * Math.PI, false); // voller Kreis 
    ctx.fillStyle = 'lightblue';
    ctx.fill();
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#003366';
    ctx.stroke(); 

    // Kreis zeichnen
    ctx.beginPath();
    ctx.arc(cx, cy, r1, 0, 2 * Math.PI, false); // voller Kreis 
    ctx.fillStyle = 'lightblue';
    ctx.fill();
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#003366';
    ctx.stroke();

    // Beispiel-Punkt (x,y), z.B. auf dem Kreisrand
    const px = cx + r * Math.cos(Math.PI / 4); // 45° auf dem Kreis
    const py = cy + r * Math.sin(Math.PI / 4);

    // Punkt zeichnen (kleiner Kreis)
    ctx.beginPath();
    ctx.arc(px, py, 4, 0, 2 * Math.PI, false); // kleiner Punkt 
    ctx.fillStyle = 'red';
    ctx.fill();

    // Koordinaten als Text daneben
    ctx.fillStyle = 'black';
    ctx.font = '12px Arial';
    ctx.fillText(`(${px.toFixed(0)}, ${py.toFixed(0)})`, px + 6, py - 6); 
</script>


