<style>
    canvas {
      border: 1px solid #000;
    }
</style>

<canvas id="myCanvas" width="700" height="600"></canvas>

<script>
    /* Hier werden die Daten vom Modul verarbeitet. In unserem Falle verschicken wir ein Objekt mit Informationen, wie bestimmte Elemente angepasst werden sollen
       Prinzipiell kann das Nachrichtenformat aber beliebig angepasst werden und kann an den Bedarf des Moduls angepasst werden */
    function handleMessage(data) {
        const decodedData = JSON.parse(data);
        for (const parameter in decodedData) {
            // Die Anpassungen betreffen immer das Element mit der ID des Parameters, daher fragen wir das Element erst einmal ab
            const element = document.getElementById(parameter);
            // Abhängig vom Parameter werden allerdings verschiedene Werte angepasst
            switch (parameter) {
                // Beim äußeren Container kann die Farbe angepasst werden. Daher ist der Wert die RGB-Farbe, welche wir im Container als Stil setzen
                case 'container': {
                    // Zahl in Hex-String überführen
                    let value = decodedData[parameter].toString(16);
                    // Auf 6 Zeichen auffüllen, damit es eine gültige Farbdarstellung wird
                    value = value.padStart(6, '0');
                    element.style.backgroundColor = '#' + value;
                    break;
                }

                // Bei den Divs für die einzelnen Zähler wird die Sichtbarkeit gesetzt (true = sichtbar, false = nicht sichtbar)
                case 'counter1':
                case 'counter2':
                case 'counter3':
                    element.className = decodedData[parameter] ? '' : 'hidden';
                    break;

                case 'image':
                    // Auch das Bild wird versteckt, falls es keine Bilddaten gibt
                    element.className = decodedData[parameter] ? '' : 'hidden';
                    element.src = decodedData[parameter];
                    break;

                default:
                    element.innerText = decodedData[parameter];
                    break;
            }
        }
    }
  
  const canvas  = document.getElementById('myCanvas');
  const ctx     = canvas.getContext('2d');

  // Beispielkoordinaten
  const x = 120;   // X-Position
  const y = 80;    // Y-Position
  const size = 50; // Kantenlänge des Quadrats

  // Quadrat zeichnen (x,y = linke obere Ecke)
  ctx.fillStyle = 'lightblue';
  ctx.fillRect(x, y, size, size); // x, y, breite, höhe [web:5]

  // Punkt an einer Position markieren (z.B. Mittelpunkt des Quadrats)
  const px = x + size / 2;
  const py = y + size / 2;

  ctx.fillStyle = 'red';
  ctx.beginPath();
  ctx.arc(px, py, 3, 0, Math.PI * 2); // kleiner Kreis als Punkt [web:1]
  ctx.fill();

  // Koordinaten als Text anzeigen
  ctx.fillStyle = 'black';
  ctx.font = '12px Arial';
  ctx.fillText(`(${px}, ${py})`, px + 5, py - 5); // [web:1]
</script>


